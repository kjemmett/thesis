%!TEX root = ./thesis.tex
\ProvidesPackage{thesis}

\usepackage{amsmath}
\usepackage{amstext}
\usepackage{amssymb}
\usepackage{amsthm}

% \usepackage[utf8]{inputenc} % not needed with xelatex
% \usepackage{fontspec}
\usepackage[T1]{fontenc}
\usepackage{lmodern}

\usepackage[table,usenames,dvipsnames]{xcolor}
\usepackage{tikz}
\usepackage{tikzscale}
\usetikzlibrary{shapes,arrows}

\usepackage{graphicx}
%\usepackage{subcaption}
\newsubfloat{figure}

% algorithm [make prettier?]
\usepackage[]{algorithm2e}

\usepackage{lipsum}
\usepackage{tocloft}
\usepackage{paralist}
\usepackage{capt-of}
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{bookmark} % loads hyperref
\usepackage[inline]{enumitem}

% hyperref settings
\hypersetup{unicode=true,
            pdfinfo={Title={\thesistitle},Author={\thesisauthor}},
            pdfencoding=auto,
            colorlinks=true,
            linkcolor={blue!50!black},
            citecolor={green!50!black}}

% must come *after* hyperref
\usepackage[all]{hypcap}  

% bibliography setup
\usepackage[backend=biber,
            bibstyle=ieee,
            citestyle=numeric,
            natbib=true,
            sorting=nyt,
            maxcitenames=3,
            maxnames=10,
            url=true,
            isbn=false,
            doi=true,
            bibencoding=utf8]{biblatex}

% skip line between bib entries
\setlength{\bibitemsep}{\baselineskip}

% set length of number width in ToC for \part
\setlength{\cftpartnumwidth}{2em}

% set depth of section numbering and table of contents
\setsecnumdepth{subsubsection}
\settocdepth{subsubsection}

% pagesizes
\paperwidth=8.5in
\paperheight=11in

% margins
\setlrmarginsandblock{1in}{1in}{*}
\setulmarginsandblock{1in}{1in}{*}
\checkandfixthelayout

% define footnote spacing
\footnotesep=1\baselineskip

% mainmatter pagestyle
\RequirePackage{etoolbox}
\appto\frontmatter{\pagestyle{plain}\SingleSpacing}
\appto\mainmatter{\pagestyle{plain}\DoubleSpacing}

% epigraph formatting
\epigraphfontsize{\small\itshape}
\setlength\epigraphwidth{5.5in}
\setlength\epigraphrule{0pt}

% define \cleardoublepageempty for plain pagestyle
% [will include page number on blank page]
\def
\cleardoublepageempty{%
\clearpage
  \ifodd\c@page
  \else
    \hbox{}
    \thispagestyle{empty}
    \newpage      
  \fi
}%

% redefine \cleardoublepage for plain pagestyle
% [will include page number on blank page]
\def
\cleardoublepage{
\clearpage
  \ifodd\c@page
  \else
    \hbox{}
    \thispagestyle{plain}
    \newpage      
  \fi
}

% title page
\newcommand{\thesistitlepage}{
    \thispagestyle{empty}
    \hypertarget{TitlePage}{}
    \bookmark[dest=TitlePage]{Title Page}
    \vspace*{1in}
    \begin{center}
        \begin{Spacing}{2}
        \textbf{\Large \thesistitle} \\ [0.5in]
        \textbf{\Large \thesisauthor} \\
        \end{Spacing}
        \vfill
        \begin{Spacing}{1}
        Submitted in partial fulfillment of the \\
        requirements for the degree of \\
        Doctor of Philosophy \\
        in the Graduate School of Arts and Sciences \\ [1in]
        \end{Spacing}
        \textbf{\Large COLUMBIA UNIVERSITY} \\ [0.2in]
        \thesisyear
    \end{center}
    \clearpage
}

% copyright page
\newcommand{\thesiscopyrightpage}{
    \thispagestyle{empty}
    \strut \vfill
    \begin{center}
        \begin{Spacing}{1.5}
        \copyright\enspace\thesisyear \\
        \thesisauthor \\
        All Rights Reserved
        \end{Spacing}
    \end{center}
    \cleardoublepageempty
}

% abstract page
\newcommand{\thesisabstract}{
    \thispagestyle{empty}
    \hypertarget{Abstract}{}
    \bookmark[dest=Abstract]{Abstract}
    \begin{center}
    \textbf{\Large ABSTRACT} \\[1cm]
     \textbf{\Large \thesistitle} \\[1cm]
     \textbf{\Large \thesisauthor} \\[1cm]
    \end{center}
    \begin{Spacing}{2}
    \input{\abstractpath}
    \end{Spacing}
    \cleardoublepageempty
}

\newcommand{\thesisacknowledgements}{
    \chapter*{Acknowledgements}
    I acknowledge the support of several individuals.
    \cleardoublepage
}
\newcommand{\thesisdedication}{
    \thispagestyle{plain}
    \vspace*{2in}
    \begin{center}
    \textit{\large
    This thesis is dedicated to Cindy Fang.
    }
    \end{center}
    \vfill \strut
    \cleardoublepage
}

% draft version
\newcommand{\draft}{
    \renewcommand{\normalspace}{\singlespace}
    \normalspace
    \chapter*{Draft. Version \today}
    \clearpage
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% macros

\DeclareMathOperator{\VietorisRips}{VietorisRips}
%\DeclareMathOperator{\Cech}{\v{C}ech}
%\newcommand{\VietorisRips}{\mathrm{VietorisRips}}
\newcommand{\Cech}{\v{C}ech}
\newcommand\given[1][]{\:#1\vert\:}
\DeclareMathOperator{\im}{im}

\theoremstyle{plain}
\newtheorem{thm}{Theorem}

\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}
\newtheorem{conj}[thm]{Conjecture}
\newtheorem{exmp}[thm]{Example}

% note
\newcommand{\kje}[1]{\textcolor{Magenta}{#1}}

% myline
\newcommand{\myline}[2]{
\path(#1.east) --(#2.west)  coordinate[pos=0.4](mid);
\draw[-latex] (#1.east) -| (mid) |- (#2.west);}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput